---
interface Props {
  id: number;
  name: string;
  price: number;
  image: string;
  images: string[]; // Added this to match your new data.json structure
  description: string;
}

const { id, name, price, image, images, description } = Astro.props;

const formattedPrice = new Intl.NumberFormat('en-NG', {
  style: 'currency',
  currency: 'NGN',
  minimumFractionDigits: 0,
}).format(price);
---

<div itemscope itemtype="https://schema.org/Product" class="bg-white/90 backdrop-blur-sm shadow-xl rounded-lg overflow-hidden transition-transform duration-300 hover:scale-105 group border border-stone-200/50">
  <a href={`/${id}`} class="block">
    <div class="relative">
      <img itemprop="image" class="w-full h-40 md:h-56 object-cover" src={image} alt={`Image of ${name}`} />
      
      {images && images.length > 1 && (
        <div class="absolute top-2 right-2 bg-black/50 backdrop-blur-md text-white text-[10px] px-2 py-1 rounded-md opacity-0 group-hover:opacity-100 transition-opacity">
          +{images.length - 1} photos
        </div>
      )}
      
      <div class="absolute inset-0 bg-black/5"></div>
    </div>
  </a>

  <div class="p-3 md:p-5">
    <h3 itemprop="name" class="text-l md:text-xl font-bold text-stone-800">{name}</h3>
    <p itemprop="offers" itemscope itemtype="https://schema.org/Offer" class="text-lg font-semibold text-stone-600 mt-1">
      <meta itemprop="priceCurrency" content="NGN" />
      <span itemprop="price" content={price}>{formattedPrice}</span>
    </p>
    
    <a 
      href={`/${id}`}
      class="mt-4 block text-center w-full bg-stone-800 text-white py-2.5 px-4 rounded-lg font-semibold transition-colors duration-300 hover:bg-stone-900"
    >
      View Details
    </a>
  </div>
</div>